/*! For license information please see main.fb2acdb57d9005cec22a.js.LICENSE.txt */
"use strict";(self.webpackChunkphoto=self.webpackChunkphoto||[]).push([[792],{803:(e,t,n)=>{var r=n(540),o=n(338),a=n(788),l=n(600);const i=function(){return r.createElement("div",{id:"main"},r.createElement("h1",null,"Online Paint"),r.createElement("div",null,r.createElement(a.sv,null)))};var c=n(511);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){m(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t,n){return(t=function(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function h(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof i?r:i,u=Object.create(c.prototype);return y(u,"_invoke",function(n,r,o){var a,i,c,u=0,f=o||[],s=!1,m={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,i=0,c=e,m.n=n,l}};function p(n,r){for(i=n,c=r,t=0;!s&&u&&!o&&t<f.length;t++){var o,a=f[t],p=m.p,h=a[2];n>3?(o=h===r)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(i=0,m.v=r,m.n=a[1]):p<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,m.n=h,i=0))}if(o||n>1)return l;throw s=!0,r}return function(o,f,h){if(u>1)throw TypeError("Generator is already running");for(s&&1===f&&p(f,h),i=f,c=h;(t=i<2?e:c)||!s;){a||(i?i<3?(i>1&&(m.n=-1),p(i,c)):m.n=c:m.v=c);try{if(u=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(s=m.n<0)?c:n.call(r,m))!==l)break}catch(t){a=e,i=1,c=t}finally{u=1}}return{value:t,done:s}}}(n,o,a),!0),u}var l={};function i(){}function c(){}function u(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(y(t={},r,function(){return this}),t),s=u.prototype=i.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,y(e,o,"GeneratorFunction")),e.prototype=Object.create(s),e}return c.prototype=u,y(s,"constructor",u),y(u,"constructor",c),c.displayName="GeneratorFunction",y(u,o,"GeneratorFunction"),y(s),y(s,o,"Generator"),y(s,r,function(){return this}),y(s,"toString",function(){return"[object Generator]"}),(h=function(){return{w:a,m}})()}function y(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}y=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){y(e,t,function(e){return this._invoke(t,n,e)})};a("next",0),a("throw",1),a("return",2)}},y(e,t,n,r)}function d(e,t,n,r,o,a,l){try{var i=e[a](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function l(e){d(a,r,o,l,i,"next",e)}function i(e){d(a,r,o,l,i,"throw",e)}l(void 0)})}}var v=function(e){return{pictures:[],loadPictures:(n=b(h().m(function t(){var n,r;return h().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("/pictures");case 1:return n=t.v,t.n=2,n.json();case 2:r=t.v,e({pictures:r});case 3:return t.a(2)}},t)})),function(){return n.apply(this,arguments)}),selectedPicture:null,addPicture:(t=b(h().m(function t(n){var r,o;return h().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("/add",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(n)});case 1:return r=t.v,t.n=2,r.json();case 2:o=t.v,e(function(e){return{pictures:[].concat((t=e.pictures,function(e){if(Array.isArray(e))return p(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[o])};var t});case 3:return t.a(2)}},t)})),function(e){return t.apply(this,arguments)}),setPicture:function(t){return e({selectedPicture:t})}};var t,n},g=function(e){return{canvas:null,setCanvas:function(t){return e({canvas:t})}}},E=function(e){return{selObj:null,changeSelObj:function(t){return e({selObj:t})}}},w=function(e){return{hide:!1,setHide:function(t){return e({hide:t})}}},S=(0,c.v)(function(){return s(s(s(s({},v.apply(void 0,arguments)),g.apply(void 0,arguments)),E.apply(void 0,arguments)),w.apply(void 0,arguments))});const j=function(){var e=S(function(e){return e.pictures});return r.createElement("div",{id:"start"},r.createElement("h2",{hidden:e.length>0},"Добро пожаловать!"),r.createElement(a.N_,{to:"/create"},"Начать"))};var O=n(663),F=n(601),k=n(188);function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const C=function(){var e,t,n=(e=(0,r.useState)(!1),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,i=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1];return r.createElement(r.Fragment,null,r.createElement("button",{id:"help",onClick:function(){a(!o)}},r.createElement(F.g,{icon:k.EvL,size:"2x",color:"#4269FF"}),r.createElement("div",{className:"tooltip",style:{display:o&&"block"}},r.createElement("p",null,"Нажмите на фигуру для редактирования."),r.createElement("p",null,"В режиме рисования кистью удерживайте клавишу ",r.createElement("mark",null,"Shift"),", чтобы нарисовать прямую линию."))))};function x(e){return new O.rw({width:50,height:50,top:e.width/2-25,left:e.height/2-25,stroke:"black",strokeWidth:1,fill:"white"})}function P(e){return new O.jl({radius:25,top:e.width/2-25,left:e.height/2-25,stroke:"black",strokeWidth:1,fill:"white"})}function T(e){return new O.lM({width:50,height:50,top:e.width/2-25,left:e.height/2-25,stroke:"black",strokeWidth:1,fill:"white"})}function N(e){return new O.X("text",{top:e.width/2-25,left:e.height/2-25,stroke:"black",strokeWidth:1,fill:"yellow"})}function I(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof i?r:i,u=Object.create(c.prototype);return _(u,"_invoke",function(n,r,o){var a,i,c,u=0,f=o||[],s=!1,m={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,i=0,c=e,m.n=n,l}};function p(n,r){for(i=n,c=r,t=0;!s&&u&&!o&&t<f.length;t++){var o,a=f[t],p=m.p,h=a[2];n>3?(o=h===r)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(i=0,m.v=r,m.n=a[1]):p<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,m.n=h,i=0))}if(o||n>1)return l;throw s=!0,r}return function(o,f,h){if(u>1)throw TypeError("Generator is already running");for(s&&1===f&&p(f,h),i=f,c=h;(t=i<2?e:c)||!s;){a||(i?i<3?(i>1&&(m.n=-1),p(i,c)):m.n=c:m.v=c);try{if(u=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(s=m.n<0)?c:n.call(r,m))!==l)break}catch(t){a=e,i=1,c=t}finally{u=1}}return{value:t,done:s}}}(n,o,a),!0),u}var l={};function i(){}function c(){}function u(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(_(t={},r,function(){return this}),t),s=u.prototype=i.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,_(e,o,"GeneratorFunction")),e.prototype=Object.create(s),e}return c.prototype=u,_(s,"constructor",u),_(u,"constructor",c),c.displayName="GeneratorFunction",_(u,o,"GeneratorFunction"),_(s),_(s,o,"Generator"),_(s,r,function(){return this}),_(s,"toString",function(){return"[object Generator]"}),(I=function(){return{w:a,m}})()}function _(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}_=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){_(e,t,function(e){return this._invoke(t,n,e)})};a("next",0),a("throw",1),a("return",2)}},_(e,t,n,r)}function G(e,t,n,r,o,a,l){try{var i=e[a](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}const R=function(e){var t=e.hideForm,n=e.setHideForm,o=e.setShowBlock,l=(0,r.useRef)(null),i=S(function(e){return e.canvas}),c=S(function(e){return e.changeSelObj}),u=(0,a.Zp)();function f(e,t){var r=e(i);r.on("selected",function(e){n(!1),c(e.target),(e.target instanceof O.rw||e.target instanceof O.jl||e.target instanceof O.lM)&&o({text:!0,stroke:!1,fill:!1,brush:!0}),e.target instanceof O.X&&o({text:!1,stroke:!1,fill:!1,brush:!0})}),i.add(r),i.requestRenderAll()}function s(){var e;return e=I().m(function e(){var t,n,r;return I().w(function(e){for(;;)switch(e.n){case 0:return t=i.toDataURL(),e.n=1,fetch(t);case 1:return n=e.v,e.n=2,n.blob();case 2:r=e.v,l.current.href=URL.createObjectURL(r),alert(l.current.href),l.current.click(),u("/");case 3:return e.a(2)}},e)}),s=function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function l(e){G(a,r,o,l,i,"next",e)}function i(e){G(a,r,o,l,i,"throw",e)}l(void 0)})},s.apply(this,arguments)}return r.createElement("div",{id:"panel",style:{display:!t&&"none"}},r.createElement(a.N_,{to:"/"},"Закрыть",r.createElement(F.g,{icon:k.yYc,size:"1x",color:"#4269FF"})),r.createElement("button",{className:"button",onClick:function(e){f(x)}},"Прямоугольник"),r.createElement("button",{className:"button",onClick:function(e){f(P)}},"Круг"),r.createElement("button",{className:"button",onClick:function(e){f(T)}},"Треугольник"),r.createElement("button",{className:"button",onClick:function(e){f(N)}},"Текст"),r.createElement("button",{className:"button",onClick:function(){i.isDrawingMode=!0,n(!1),o({text:!0,stroke:!0,fill:!0,brush:!1})}},"Кисть"),r.createElement("button",{onClick:function(){return s.apply(this,arguments)},className:"save"},"Сохранить изображение"),r.createElement("a",{download:"image.png",href:"",ref:l}),r.createElement(C,null))};function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,i=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const U=function(){var e=S(function(e){return e.canvas}),t=S(function(e){return e.selObj}),n=D((0,r.useState)("text"),2),o=n[0],a=n[1],l=D((0,r.useState)("Times New Roman"),2),i=(l[0],l[1]),c=D((0,r.useState)(!1),2),u=c[0],f=c[1],s=D((0,r.useState)(!1),2),m=s[0],p=s[1],h=D((0,r.useState)(!1),2),y=h[0],d=h[1],b=D((0,r.useState)(!1),2),v=b[0],g=b[1],E=D((0,r.useState)(!1),2),w=E[0],j=E[1];function O(n){t.set(n.target.name,n.target.value),e.requestRenderAll()}function F(n){t.set(n.target.name,n.target.checked),e.requestRenderAll()}return(0,r.useEffect)(function(){return t&&(a(t.get("text")),i(t.get("fontFamily")),f("bold"==t.get("fontWeight")),p("italic"==t.get("fontStyle")),d(t.get("underline")),g(t.get("linethrough")),j(t.get("overline"))),function(){a("text"),i("Times New Roman"),f(!1),p(!1),d(!1),g(!1),j(!1)}},[t]),r.createElement(r.Fragment,null,r.createElement("label",{className:"label"},"Текст: "),r.createElement("textarea",{value:o,onChange:function(e){a(e.target.value),O(e)},name:"text"}),r.createElement("br",null),r.createElement("label",{className:"label"},"Шрифт: "),r.createElement("select",{name:"fontFamily",onChange:function(e){i(e.target.value),O(e)}},r.createElement("option",null,"Times New Roman"),r.createElement("option",null,"Arial"),r.createElement("option",null,"Monospace"),r.createElement("option",null,"Comic Sans")),r.createElement("br",null),r.createElement("label",{style:{backgroundColor:u?"#1949FF":"#6988FF"}},r.createElement("input",{type:"checkbox",value:u?"normal":"bold",name:"fontWeight",checked:u,onChange:function(e){f(!u),O(e)}}),"Полужирный"),r.createElement("label",{style:{backgroundColor:m?"#1949FF":"#6988FF"}},r.createElement("input",{type:"checkbox",value:m?"normal":"italic",name:"fontStyle",checked:m,onChange:function(e){p(!m),O(e)}}),"Курсив"),r.createElement("br",null),r.createElement("label",{style:{backgroundColor:y?"#1949FF":"#6988FF"}},r.createElement("input",{type:"checkbox",name:"underline",checked:y,onChange:function(e){d(!y),F(e)}}),"Подчеркнутый"),r.createElement("label",{style:{backgroundColor:v?"#1949FF":"#6988FF"}},r.createElement("input",{type:"checkbox",name:"linethrough",checked:v,onChange:function(e){g(!v),F(e)}}),"Зачеркнутый"),r.createElement("label",{style:{backgroundColor:w?"#1949FF":"#6988FF"}},r.createElement("input",{type:"checkbox",name:"overline",checked:w,onChange:function(e){j(!w),F(e)}}),"Надчеркнутый"))};function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,i=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const B=function(e){var t=e.prop,n=W((0,r.useState)("#FFFFFF"),2),o=n[0],a=n[1],l=W((0,r.useState)(1),2),i=l[0],c=l[1],u=S(function(e){return e.canvas}),f=S(function(e){return e.selObj});function s(e){var n=e.c,r=void 0===n?o:n,a=e.a,l=void 0===a?i:a,c=new O.Q1(r).toRgba();f.set(t,c.replace(/1(?=\))/,l)),u.requestRenderAll()}return(0,r.useEffect)(function(){if(f){var e=new O.Q1(f.get(t));a("#"+e.toHex()),c(e.getAlpha())}return function(){a("#FFFFFF"),c(1)}},[f]),r.createElement(r.Fragment,null,r.createElement("label",{className:"label"},"Цвет: "),r.createElement("input",{type:"color",onChange:function(e){a(e.target.value),s({c:e.target.value})},value:o}),r.createElement("br",null),r.createElement("label",{className:"label"},"Прозрачность: "),r.createElement("input",{type:"range",onChange:function(e){c(e.target.value),s({a:e.target.value})},value:i,min:"0",max:"1",step:"0.1"}),r.createElement("br",null))};function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const $=function(){var e,t,n=(e=(0,r.useState)(5),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,i=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1],l=S(function(e){return e.canvas}),i=S(function(e){return e.selObj});return(0,r.useEffect)(function(){return i&&a(i.get("strokeWidth")),function(){a(5)}},[i]),r.createElement(r.Fragment,null,r.createElement(B,{prop:"stroke"}),r.createElement("label",{className:"label"},"Ширина: "),r.createElement("input",{type:"range",value:o,min:"1",max:"10",step:"1",onChange:function(e){a(e.target.value),i.set("strokeWidth",+e.target.value),l.requestRenderAll()}}))};function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,i=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const z=function(){var e=L((0,r.useState)(null),2),t=e[0],n=e[1],o=L((0,r.useState)(null),2),a=o[0],l=o[1],i=L((0,r.useState)("#FF0000"),2),c=i[0],u=i[1],f=L((0,r.useState)(1),2),s=f[0],m=f[1],p=L((0,r.useState)(5),2),h=p[0],y=p[1],d=S(function(e){return e.canvas}),b=S(function(e){return e.selObj});function v(e){switch(u("#FF0000"),m(1),y(5),l(e.target.value),e.target.value){case"pencil":n(function(e){var t=new O.mW(e);return e.freeDrawingBrush=t,t.color="red",t.width=5,t.straightLineKey="shiftKey",t.drawStraightLine=!0,t}(d));break;case"circle":n(function(e){var t=new O.bU(e);return e.freeDrawingBrush=t,t.color="red",t.width=5,t}(d));break;case"spray":n(function(e){var t=new O.af(e);return e.freeDrawingBrush=t,t.color="red",t.width=5,t}(d))}}function g(e){var n=e.c,r=void 0===n?c:n,o=e.a,a=void 0===o?s:o,l=new O.Q1(r).toRgba();t.color=l.replace(/1(?=\))/,a),d.requestRenderAll()}(0,r.useEffect)(function(){n(null),l(null),u("#FF0000"),m(1),y(5)},[b]);var E={width:h+"px",height:h+"px",background:c,opacity:s};return r.createElement(r.Fragment,null,r.createElement("label",{style:{backgroundColor:"pencil"==a?"#1949FF":"#6988FF"}},r.createElement("input",{type:"radio",checked:"pencil"==a,value:"pencil",onChange:v}),"Кисть"),r.createElement("label",{style:{backgroundColor:"circle"==a?"#1949FF":"#6988FF"}},r.createElement("input",{type:"radio",checked:"circle"==a,value:"circle",onChange:v}),"Круги"),r.createElement("label",{style:{backgroundColor:"spray"==a?"#1949FF":"#6988FF"}},r.createElement("input",{type:"radio",checked:"spray"==a,value:"spray",onChange:v}),"Спрей"),r.createElement("br",null),r.createElement("label",{className:"label"},"Цвет: "),r.createElement("input",{type:"color",onChange:function(e){u(e.target.value),g({c:e.target.value})},value:c}),r.createElement("br",null),r.createElement("label",{className:"label"},"Прозрачность: "),r.createElement("input",{type:"range",onChange:function(e){m(e.target.value),g({a:e.target.value})},value:s,min:"0",max:"1",step:"0.1"}),r.createElement("br",null),r.createElement("label",{className:"label"},"Размер кисти: "),r.createElement("input",{type:"range",min:"1",max:"20",step:"1",value:h,onChange:function(e){y(+e.target.value),t.width=+e.target.value,d.requestRenderAll()}}),r.createElement("span",{style:E}))},K=function(e){var t=e.hideForm,n=e.setHideForm,o=e.showBlock,a=S(function(e){return e.canvas});return r.createElement("form",{id:"editForm",style:{display:t&&"none"},onSubmit:function(e){e.preventDefault()}},r.createElement("fieldset",{hidden:o.text,id:"text"},r.createElement("legend",null,"Текст"),r.createElement(U,null)),r.createElement("fieldset",{id:"stroke",hidden:o.stroke},r.createElement("legend",null,"Контур"),r.createElement($,{add:o.add})),r.createElement("fieldset",{id:"fill",hidden:o.fill},r.createElement("legend",null,"Заливка"),r.createElement(B,{prop:"fill"})),r.createElement("fieldset",{id:"brush",hidden:o.brush},r.createElement("legend",null,"Кисть"),r.createElement(z,null)),r.createElement("div",null,r.createElement("button",{onClick:function(){var e=a.getObjects(),t=a.item(e.length-1);a.remove(t)}},"Удалить"),r.createElement("button",{onClick:function(){n(!0),a.isDrawingMode=!1}},"Применить")),r.createElement(C,null))};function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,i=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Y=function(){S(function(e){return e.canvas});var e=S(function(e){return e.setCanvas}),t=V((0,r.useState)(!0),2),n=t[0],o=t[1],l=V((0,r.useState)({text:!0,stroke:!0,fill:!0,brush:!0}),2),i=l[0],c=l[1],u=V((0,r.useState)(!0),2),f=(u[0],u[1],V((0,a.ok)(),2)),s=f[0];return f[1],(0,r.useEffect)(function(){var t=new O.Hl("canvas",{width:+s.get("width"),height:+s.get("height"),backgroundColor:"white"});return e(t),function(){t.dispose()}},[]),r.createElement("div",{id:"editor"},r.createElement("div",null,r.createElement("canvas",{id:"canvas"})),r.createElement(R,{hideForm:n,setHideForm:o,setShowBlock:c}),r.createElement(K,{hideForm:n,setHideForm:o,showBlock:i}))},J=function(){return r.createElement("div",{id:"create"},r.createElement("h3",null,"Размер холста"),r.createElement(a.lV,{method:"post"},r.createElement("label",null,"Ширина: "),r.createElement("select",{name:"width"},r.createElement("option",null,"300"),r.createElement("option",null,"400"),r.createElement("option",null,"500"),r.createElement("option",null,"600"),r.createElement("option",null,"700"),r.createElement("option",null,"800")),r.createElement("br",null),r.createElement("label",null,"Высота: "),r.createElement("select",{name:"height"},r.createElement("option",null,"300"),r.createElement("option",null,"400"),r.createElement("option",null,"500"),r.createElement("option",null,"600"),r.createElement("option",null,"700"),r.createElement("option",null,"800")),r.createElement("br",null),r.createElement("button",null,"Создать")))};function Z(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof i?r:i,u=Object.create(c.prototype);return ee(u,"_invoke",function(n,r,o){var a,i,c,u=0,f=o||[],s=!1,m={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,i=0,c=e,m.n=n,l}};function p(n,r){for(i=n,c=r,t=0;!s&&u&&!o&&t<f.length;t++){var o,a=f[t],p=m.p,h=a[2];n>3?(o=h===r)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(i=0,m.v=r,m.n=a[1]):p<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,m.n=h,i=0))}if(o||n>1)return l;throw s=!0,r}return function(o,f,h){if(u>1)throw TypeError("Generator is already running");for(s&&1===f&&p(f,h),i=f,c=h;(t=i<2?e:c)||!s;){a||(i?i<3?(i>1&&(m.n=-1),p(i,c)):m.n=c:m.v=c);try{if(u=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(s=m.n<0)?c:n.call(r,m))!==l)break}catch(t){a=e,i=1,c=t}finally{u=1}}return{value:t,done:s}}}(n,o,a),!0),u}var l={};function i(){}function c(){}function u(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(ee(t={},r,function(){return this}),t),s=u.prototype=i.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,ee(e,o,"GeneratorFunction")),e.prototype=Object.create(s),e}return c.prototype=u,ee(s,"constructor",u),ee(u,"constructor",c),c.displayName="GeneratorFunction",ee(u,o,"GeneratorFunction"),ee(s),ee(s,o,"Generator"),ee(s,r,function(){return this}),ee(s,"toString",function(){return"[object Generator]"}),(Z=function(){return{w:a,m}})()}function ee(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}ee=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){ee(e,t,function(e){return this._invoke(t,n,e)})};a("next",0),a("throw",1),a("return",2)}},ee(e,t,n,r)}function te(e,t,n,r,o,a,l){try{var i=e[a](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ne(){var e;return e=Z().m(function e(t){var n,r,o,l,i;return Z().w(function(e){for(;;)switch(e.n){case 0:return n=t.request,e.n=1,n.formData();case 1:return r=e.v,o=r.get("width"),l=r.get("height"),i=(0,a.PI)({width:o,height:l}),e.a(2,(0,a.V2)("/edit?".concat(i)))}},e)}),ne=function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function l(e){te(a,r,o,l,i,"next",e)}function i(e){te(a,r,o,l,i,"throw",e)}l(void 0)})},ne.apply(this,arguments)}var re=(0,a.Ys)([{path:"/",element:r.createElement(i,null),children:[{index:!0,element:r.createElement(j,null)},{path:"/create",element:r.createElement(J,null),action:function(e){return ne.apply(this,arguments)}},{path:"/edit",element:r.createElement(Y,null)}]}]);o.createRoot(document.getElementById("root")).render(r.createElement(l.p,{router:re},r.createElement(i,null)))}},e=>{e.O(0,[90,308,825,547,457,979,521,23],()=>e(e.s=803)),e.O()}]);